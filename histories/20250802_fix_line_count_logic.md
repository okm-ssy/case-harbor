# 行数カウント問題の修正

## 問題の特定

ユーザーの入力例：
```
a
b
c
d
```

期待される表示：
```
a
b
c
...
```

実際の表示：全行表示されていた（"..."が表示されない）

## 原因

末尾の改行文字により行数のカウントが正しく行われていなかった。
`"a\nb\nc\nd\n"` を `split('\n')` すると `["a", "b", "c", "d", ""]` となり、5行としてカウントされていた。

## 実装内容

### getDisplayValue関数の修正

**修正前:**
```typescript
const lines = value.split('\n');
```

**修正後:**
```typescript
const trimmedValue = value.replace(/\n+$/, '');
const lines = trimmedValue.split('\n');
```

## 修正内容

1. **末尾の改行除去**: `replace(/\n+$/, '')` で末尾の改行文字を削除
2. **正確な行数カウント**: 空の最終要素を除いて正しい行数を取得
3. **表示ロジック**: 3行制限の判定が正確に動作

## 動作例

**入力**: `"a\nb\nc\nd\n"`
- **修正前**: 5行と判定 → 全行表示
- **修正後**: 4行と判定 → "a\nb\nc\n..." 表示

## 結果

- 4行以上の入力で確実に"..."が表示される
- 末尾改行の有無に関わらず一貫した動作
- ユーザーの期待通りの表示を実現